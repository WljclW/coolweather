<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.66 Safari/537.36" version="28.0.7">
  <diagram name="米家App客户端架构图" id="qhzowJNQwA2y3HI1EWHP">
    <mxGraphModel dx="769" dy="1791" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-1" value="数据源层（Data Sources）&#xa;- Remote（API）、Local（Room/SP）等&#xa;- Retrofit / OkHttp / Room / DataStore" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#DAF0F7;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="160" y="950" width="800" height="170" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-2" value="&#xa;- 统一数据来源：网络、本地数据库、缓存等&#xa;- 对外隐藏数据源细节" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#E0F7DA;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="160" y="670" width="800" height="170" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-3" value="Use Case / Interactor 层&#xa;- 业务逻辑中间层，协调多个仓库数据&#xa;- 每个 use case 代表一个具体的业务动作" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#FFF9C4;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="160" y="430" width="800" height="170" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-4" value="&#xa;- 负责业务状态、数据转换、界面交互协调&#xa;- 使用 LiveData / Flow / StateFlow 等" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#FBE9E7;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="160" y="210" width="800" height="170" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-5" value="&#xa;- Activity / Fragment / Compose UI&#xa;- XML / Jetpack Compose / SwiftUI" style="shape=rectangle;whiteSpace=wrap;rounded=1;fillColor=#E1BEE7;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="160" y="-20" width="800" height="170" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-6" style="endArrow=block;strokeWidth=2;" parent="1" source="SkOOyBR_OrGC0wOGbPdk-1" target="SkOOyBR_OrGC0wOGbPdk-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-7" style="endArrow=block;strokeWidth=2;" parent="1" source="SkOOyBR_OrGC0wOGbPdk-2" target="SkOOyBR_OrGC0wOGbPdk-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-8" style="endArrow=block;strokeWidth=2;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="SkOOyBR_OrGC0wOGbPdk-3" target="SkOOyBR_OrGC0wOGbPdk-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="559.9999999999998" y="524" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-9" style="endArrow=block;strokeWidth=2;" parent="1" source="SkOOyBR_OrGC0wOGbPdk-4" target="SkOOyBR_OrGC0wOGbPdk-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-10" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Data Sources层&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="30" y="985" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-11" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Repository 层&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="40" y="705" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-17" value="TimerTplv2Provider设备定时列表仓储类" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="710" y="690" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-18" value="SpecSceneConfigOperation模板数据管理类" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="710" y="720" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-19" value="SceneManagerV2" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="730" y="740" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-20" value="EntranceDisplayDataSource，C700视觉大模型感知数据源" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="440" y="675" width="175" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-21" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;Interactor 层&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="40" y="519" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-23" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;ViewModel（视图模型层）&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="40" y="245" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-32" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;UI 层（View）&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="50" y="90" width="115" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-34" value="MultiSwitchViewModel批量控制" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="720" y="220" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-36" value="CameraAiViewModel" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="750" y="245" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SkOOyBR_OrGC0wOGbPdk-37" value="DisplayListLevel23ViewModel视觉大模型" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="720" y="270" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fMZOLJ-7lnfKRuvi4cig-1" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;TCA创建列表UI&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="330" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fMZOLJ-7lnfKRuvi4cig-2" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;TC设备列表UI&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="330" y="60" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fMZOLJ-7lnfKRuvi4cig-3" value="其他TCA创建的UI" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="680" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="fMZOLJ-7lnfKRuvi4cig-6" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;MIUIPhoneTriggerBroadcastReceiver等广播接收和处理&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="175" y="498" width="270" height="51" as="geometry" />
        </mxCell>
        <mxCell id="fMZOLJ-7lnfKRuvi4cig-7" value="MSDataSource批量开关数据源附加处理" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="175" y="438" width="265" height="52" as="geometry" />
        </mxCell>
        <mxCell id="fMZOLJ-7lnfKRuvi4cig-8" value="SceneAddMenuPopupWindow等自定义弹窗模块&lt;br&gt;SceneTipPopupWindow自定义tips弹窗" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="650" y="434" width="250" height="66" as="geometry" />
        </mxCell>
        <mxCell id="fMZOLJ-7lnfKRuvi4cig-9" value="com/xiaomi/smarthome/specscene/util各种工具类" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="730" y="510" width="230" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RSx5rajIObuwsSFLTWjq-1" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;各种xxxAdapter&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="165" width="135" height="50" as="geometry" />
        </mxCell>
        <mxCell id="RSx5rajIObuwsSFLTWjq-2" value="&lt;span style=&quot;white-space: pre;&quot;&gt;specscene数据列表仓储&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="165" y="770" width="280" height="30" as="geometry" />
        </mxCell>
        <mxCell id="RSx5rajIObuwsSFLTWjq-3" value="&lt;div style=&quot;white-space: pre;&quot;&gt;模板数据仓储管理模块&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="190" y="675" width="212.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="RSx5rajIObuwsSFLTWjq-4" value="&lt;span style=&quot;white-space: pre;&quot; class=&quot;text-only text-with-abbreviation text-with-abbreviation-bottomline windows-bottomline&quot;&gt;设备TC标准化&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot; class=&quot;text-only&quot;&gt;数据解析存储模块&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="237" y="553" width="190" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aQULPjQDu08E6a-2-mzT-1" value="&lt;span style=&quot;white-space: pre;&quot;&gt;自动化配置信息仓储模块&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="175" y="720" width="255" height="45" as="geometry" />
        </mxCell>
        <mxCell id="aQULPjQDu08E6a-2-mzT-2" value="自动化编辑创建视图模型" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="215" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aQULPjQDu08E6a-2-mzT-3" value="自动化列表视图模型" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="290" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
